{"id":"sudograph-1","title":"Discovered bug","description":"","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-10-16T11:25:47.336016-07:00","updated_at":"2025-10-16T13:03:30.776706-07:00","closed_at":"2025-10-16T13:03:30.776706-07:00"}
{"id":"sudograph-10","title":"Design and implement CLI commands","description":"Create CLI tool (sg) with commands for managing specs and issues","design":"Use commander.js or yargs for CLI:\n- sg init - Initialize .sudocode structure\n- sg spec create/list/show/update - Spec management\n- sg issue create/list/show/update/close - Issue management  \n- sg link \u003cfrom\u003e \u003cto\u003e --type - Create relationships\n- sg ready - Show ready work (no blockers)\n- sg blocked - Show blocked items\n- sg sync [--watch] - Manual or continuous sync\n- sg export/import - JSONL operations\n- Support --format json/yaml for machine-readable output","acceptance_criteria":"- [ ] All core commands implemented\n- [ ] Help text for all commands\n- [ ] JSON output format supported\n- [ ] Error handling with clear messages\n- [ ] Integration tests for key workflows","status":"open","priority":1,"issue_type":"task","created_at":"2025-10-16T12:54:01.676677-07:00","updated_at":"2025-10-16T12:54:01.676677-07:00","dependencies":[{"issue_id":"sudograph-10","depends_on_id":"sudograph-3","type":"blocks","created_at":"2025-10-16T12:54:01.678036-07:00","created_by":"alexngai"},{"issue_id":"sudograph-10","depends_on_id":"sudograph-5","type":"blocks","created_at":"2025-10-16T12:54:01.678649-07:00","created_by":"alexngai"},{"issue_id":"sudograph-10","depends_on_id":"sudograph-6","type":"blocks","created_at":"2025-10-16T12:54:01.679076-07:00","created_by":"alexngai"},{"issue_id":"sudograph-10","depends_on_id":"sudograph-8","type":"blocks","created_at":"2025-10-16T12:54:01.679474-07:00","created_by":"alexngai"}]}
{"id":"sudograph-11","title":"Implement short history reconstruction from JSONL diffs","description":"On import, reconstruct recent event history by diffing old vs new JSONL state","design":"Implement reconstructShortHistory():\n- Compare old SQLite state vs new JSONL entries\n- Detect: created, updated, deleted entities\n- Generate synthetic events with proper timestamps\n- Use updated_by field for actor attribution\n- Insert events into events table with source='sync'","acceptance_criteria":"- [ ] Generates events for created entities\n- [ ] Generates events for updated entities (with old/new values)\n- [ ] Generates events for deleted entities\n- [ ] Events appear in sg issue show history\n- [ ] Unit tests with before/after snapshots","status":"open","priority":3,"issue_type":"task","created_at":"2025-10-16T12:54:10.566975-07:00","updated_at":"2025-10-16T12:54:10.566975-07:00","dependencies":[{"issue_id":"sudograph-11","depends_on_id":"sudograph-6","type":"blocks","created_at":"2025-10-16T12:54:10.567901-07:00","created_by":"alexngai"}]}
{"id":"sudograph-12","title":"Design git history reconstruction for full event timeline (future)","description":"Design approach for reconstructing complete event history from git commits (TODO for later)","design":"Research and design:\n- Git library selection (simple-git, nodegit, isomorphic-git)\n- Walking git log efficiently (--follow for file history)\n- Diffing JSONL files between commits\n- Handling merge commits and attribution\n- Performance optimization for large repos\n- Incremental vs full rebuild strategy\n- CLI command: sg history rebuild --from-git","acceptance_criteria":"- [ ] Design document created\n- [ ] Library evaluated and selected\n- [ ] Performance benchmarks (1k, 10k, 100k commits)\n- [ ] Edge cases documented\n- [ ] Implementation plan with milestones","status":"open","priority":4,"issue_type":"task","created_at":"2025-10-16T12:54:20.128491-07:00","updated_at":"2025-10-16T12:54:20.128491-07:00"}
{"id":"sudograph-2","title":"Define SQLite schema for core storage","description":"Implement SQLite schema with tables for specs, issues, relationships, tags, and events as defined in specs/storage.md","design":"Create TypeScript/SQL files for:\n- specs table (id, title, file_path, content, type, status, priority, timestamps, created_by, updated_by, parent_id)\n- issues table (id, title, description, content, status, priority, issue_type, assignee, estimated_minutes, timestamps, created_by, parent_id)\n- relationships table (polymorphic: from_id, from_type, to_id, to_type, relationship_type, created_at, created_by, metadata)\n- tags table (entity_id, entity_type, tag)\n- events table (id, entity_id, entity_type, event_type, actor, old_value, new_value, comment, created_at, git_commit_sha, source)\n\nInclude all indexes and views (ready_specs, ready_issues, blocked_issues)","acceptance_criteria":"- [ ] All tables defined with proper constraints and foreign keys\n- [ ] All indexes created\n- [ ] Views for ready_specs, ready_issues, blocked_issues work correctly\n- [ ] Database configuration (WAL mode, foreign keys enabled)\n- [ ] Migration system in place","notes":"Implementation complete. All tables, indexes, and views created successfully. Database configuration (WAL mode, foreign keys) properly set up. TypeScript interfaces and schema tested and working.\n\nMigration system deferred as a future enhancement - current implementation handles schema initialization via code.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-16T12:52:34.618507-07:00","updated_at":"2025-10-16T13:13:27.583389-07:00"}
{"id":"sudograph-3","title":"Implement CRUD operations for specs and issues","description":"Create TypeScript modules for database operations on specs and issues with transaction support","design":"Implement database layer with:\n- Connection management (better-sqlite3)\n- Transaction support (begin, commit, rollback)\n- Spec operations (create, read, update, delete, list, search)\n- Issue operations (create, read, update, delete, list, search)\n- Relationship operations (add, remove, get dependencies, get dependents)\n- Tag operations (add, remove, list)\n- Event operations (insert, query by entity)","acceptance_criteria":"- [ ] All CRUD operations implemented\n- [ ] Transactions work properly with rollback on error\n- [ ] Type-safe TypeScript interfaces\n- [ ] Unit tests for all operations\n- [ ] Error handling for constraint violations","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-16T12:52:44.890209-07:00","updated_at":"2025-10-16T13:52:57.258758-07:00","closed_at":"2025-10-16T13:52:57.258758-07:00","dependencies":[{"issue_id":"sudograph-3","depends_on_id":"sudograph-2","type":"blocks","created_at":"2025-10-16T12:52:44.892166-07:00","created_by":"alexngai"}]}
{"id":"sudograph-4","title":"Implement JSONL reader/writer","description":"Create modules to read and write JSONL files for specs and issues","design":"Implement:\n- readJSONL(path): Read JSONL file line-by-line, parse JSON, return array of entities\n- writeJSONL(path, entities): Write entities to JSONL, one per line\n- updateJSONLLine(path, entity): Replace specific line by ID or append\n- Support for both specs.jsonl and issues.jsonl formats\n- Handle malformed JSON gracefully","acceptance_criteria":"- [ ] Can read JSONL files with proper error handling\n- [ ] Can write complete JSONL snapshots\n- [ ] Can update individual lines efficiently\n- [ ] Handles large files (streaming for reads)\n- [ ] Unit tests with sample JSONL files","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-16T12:52:54.683606-07:00","updated_at":"2025-10-16T12:52:54.683606-07:00"}
{"id":"sudograph-5","title":"Implement SQLite → JSONL export","description":"Export current state from SQLite to JSONL snapshot files","design":"Implement exportToJSONL():\n- Query all specs from SQLite with relationships and tags embedded\n- Query all issues from SQLite with relationships and tags embedded  \n- Write to specs.jsonl and issues.jsonl\n- Support incremental export (only changed entities) vs full export\n- Debouncing with 5-second delay","acceptance_criteria":"- [ ] Exports complete database state to JSONL\n- [ ] Relationships and tags properly embedded\n- [ ] Debouncing prevents rapid repeated exports\n- [ ] Atomic file writes (temp file + rename)\n- [ ] CLI command: sg export works","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-16T12:53:07.204782-07:00","updated_at":"2025-10-16T12:53:07.204782-07:00","dependencies":[{"issue_id":"sudograph-5","depends_on_id":"sudograph-3","type":"blocks","created_at":"2025-10-16T12:53:07.206385-07:00","created_by":"alexngai"},{"issue_id":"sudograph-5","depends_on_id":"sudograph-4","type":"blocks","created_at":"2025-10-16T12:53:07.207116-07:00","created_by":"alexngai"}]}
{"id":"sudograph-6","title":"Implement JSONL → SQLite import with collision resolution","description":"Import JSONL snapshots into SQLite with automatic collision detection and resolution","design":"Implement importFromJSONL():\n- Read JSONL files (specs.jsonl, issues.jsonl)\n- Detect changes: additions, updates, deletions\n- Detect collisions: same ID, different content\n- Resolve collisions using reference counting algorithm\n- Update all text references when renumbering\n- Apply changes in transaction\n- Optionally update markdown files","acceptance_criteria":"- [ ] Imports JSONL and updates SQLite\n- [ ] Detects and resolves ID collisions automatically\n- [ ] Updates text references (regex \\bid\\b replacement)\n- [ ] Logs collision resolutions to meta.json\n- [ ] CLI command: sg import works\n- [ ] --dry-run flag shows changes without applying","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-16T12:53:17.411381-07:00","updated_at":"2025-10-16T12:53:17.411381-07:00","dependencies":[{"issue_id":"sudograph-6","depends_on_id":"sudograph-3","type":"blocks","created_at":"2025-10-16T12:53:17.412664-07:00","created_by":"alexngai"},{"issue_id":"sudograph-6","depends_on_id":"sudograph-4","type":"blocks","created_at":"2025-10-16T12:53:17.413229-07:00","created_by":"alexngai"}]}
{"id":"sudograph-7","title":"Implement markdown parser with frontmatter support","description":"Parse markdown files with YAML frontmatter for specs and issues","design":"Use gray-matter or similar library:\n- Parse frontmatter (YAML) and content separately\n- Extract spec/issue metadata from frontmatter\n- Extract cross-references from content ([[@issue-001]], [[spec-002]])\n- Support writing frontmatter back (update fields)","acceptance_criteria":"- [ ] Parses YAML frontmatter correctly\n- [ ] Extracts markdown content\n- [ ] Finds all cross-references in content\n- [ ] Can update frontmatter without corrupting content\n- [ ] Unit tests with various frontmatter formats","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-16T12:53:29.580066-07:00","updated_at":"2025-10-16T12:53:29.580066-07:00"}
{"id":"sudograph-8","title":"Implement Markdown ↔ JSONL sync","description":"Bidirectional sync between markdown files and JSONL snapshots","design":"Implement:\n- syncMarkdownToJSONL(mdPath): Parse markdown, update JSONL, update SQLite\n- syncJSONLToMarkdown(id): Read from JSONL/SQLite, update markdown frontmatter\n- Merge relationships (preserve if not in frontmatter)\n- Handle new files vs updates","acceptance_criteria":"- [ ] Markdown edits propagate to JSONL and SQLite\n- [ ] JSONL changes update markdown frontmatter\n- [ ] Relationships preserved correctly\n- [ ] No data loss during sync\n- [ ] Unit tests for both directions","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-16T12:53:38.480628-07:00","updated_at":"2025-10-16T12:53:38.480628-07:00","dependencies":[{"issue_id":"sudograph-8","depends_on_id":"sudograph-3","type":"blocks","created_at":"2025-10-16T12:53:38.482553-07:00","created_by":"alexngai"},{"issue_id":"sudograph-8","depends_on_id":"sudograph-4","type":"blocks","created_at":"2025-10-16T12:53:38.483559-07:00","created_by":"alexngai"},{"issue_id":"sudograph-8","depends_on_id":"sudograph-7","type":"blocks","created_at":"2025-10-16T12:53:38.484541-07:00","created_by":"alexngai"}]}
{"id":"sudograph-9","title":"Implement file watcher with chokidar","description":"Watch .sudocode directory for file changes and trigger auto-sync","design":"Use chokidar to watch:\n- .sudocode/specs/*.md\n- .sudocode/issues/*.md\n- .sudocode/specs/specs.jsonl\n- .sudocode/issues/issues.jsonl\n\nImplement debouncing (2 seconds) to batch rapid changes\nTrigger appropriate sync operation based on file type","acceptance_criteria":"- [ ] Watches markdown files for changes\n- [ ] Watches JSONL files for external changes (git pull)\n- [ ] Debounces rapid file changes\n- [ ] CLI command: sg sync --watch works\n- [ ] Can start/stop watcher\n- [ ] Graceful shutdown on Ctrl+C","status":"open","priority":3,"issue_type":"task","created_at":"2025-10-16T12:53:48.320875-07:00","updated_at":"2025-10-16T12:53:48.320875-07:00","dependencies":[{"issue_id":"sudograph-9","depends_on_id":"sudograph-8","type":"blocks","created_at":"2025-10-16T12:53:48.322192-07:00","created_by":"alexngai"}]}
